## ------------------------------------------------------------------------------------------------------------------------------------------------
x <- 0
if(1 == 1){
  x <- 1
}
x
if(0 == 1){
  x <- 2
}
x


## ------------------------------------------------------------------------------------------------------------------------------------------------
square_matrix <- matrix((1:9)^2, 3, 3)
# Only square matrices can be inverted!
inv <- NULL
if(nrow(square_matrix) == ncol(square_matrix)){
  print("Matrix is square, inverting...")
  inv <- solve(square_matrix)
}
inv


## ------------------------------------------------------------------------------------------------------------------------------------------------
# Matrix is now 2 x 2
square_matrix <- matrix((1:6)^2, 2, 3)
# Only square matrices can be inverted!
inv <- NULL
if(nrow(square_matrix) == ncol(square_matrix)) {
  print("Matrix is square, inverting...")
  inv <- solve(square_matrix)
} else {
  print("Matrix is NOT square, stopping...")
}
inv


## ------------------------------------------------------------------------------------------------------------------------------------------------
c(2,-2) > 0
if(c(2,-2) > 0) { 
  print("This code gives a warning!")
}


## ------------------------------------------------------------------------------------------------------------------------------------------------
1:12
(1:12 %% 3) == 0 # The %% operator returns the remainder.
ifelse(test = (1:12 %% 3) == 0,
       yes = "Div by 3",
       no = "NOT div by 3")


## ------------------------------------------------------------------------------------------------------------------------------------------------
x1 <- 2
x2 <- 5
if(x1 > 1) {
  if(x2 >= 5) {
    y <- 1    
  } else {
    y <- 4
  }
} else {
  y <- 12
}
y


## ---- eval=FALSE, echo=TRUE----------------------------------------------------------------------------------------------------------------------
## for(index_variable in variable_value_loop) {
##   # code that depends on the index variable
## }


## ------------------------------------------------------------------------------------------------------------------------------------------------
for(i in 1:10) {
  print(i)
}


## ------------------------------------------------------------------------------------------------------------------------------------------------
x <- 1
for(i in 1:10) {
  cat("x =", x,", i =", i, "\n")#cat = concatenate and print
  x <- x * i
}


## ------------------------------------------------------------------------------------------------------------------------------------------------
vector <- c(1.2, 4, 0.4, 4, 1.1)
for(e in vector) {
  cat("e =", e,", e^2 =", e^2, "\n")
}


## ------------------------------------------------------------------------------------------------------------------------------------------------
list_of_vectors <- list(1:10,3:7,5:10,1:200)
length(list_of_vectors)
for(i in 1:length(list_of_vectors)) {
  cat("index =",i,
      "length of list element =",length(list_of_vectors[[i]]),
      "\n")
}


## ------------------------------------------------------------------------------------------------------------------------------------------------
A <- matrix(NA, nrow = 3, ncol = 3)
for(i in 1:3) {
  for(j in 1:3) {
    cat("A_ij =",i,"*",j," =",i*j,"\n")
    A[i,j] <- i*j
  }
}
A


## ---- eval=FALSE, echo=TRUE----------------------------------------------------------------------------------------------------------------------
## variable <- value
## while(logical_condition) {
##   # code that will run until logical_condition
##   # is FALSE. At that point, this code will
##   # NOT be run again.
## }


## ------------------------------------------------------------------------------------------------------------------------------------------------
variable <- 10
while(variable <= 15) {
  variable <- variable + 1
  cat("Code has been excuted, variable is now",variable,"\n")
  cat("Condition variable <= 15 is",variable <= 15,"\n")
}
variable


## ------------------------------------------------------------------------------------------------------------------------------------------------
x <- 1
while(1 > 0) {
  x <- x + 1
  if(x == 10) break
}
x
x <- 1
while(1 > 0) {
  if(x == 10) break
  x <- x + 1  # not executed!
}
x


## ------------------------------------------------------------------------------------------------------------------------------------------------
x <- 1
while(1 > 0) {
  x <- x + 1
  if(x >= 10) break
  if((x %% 2) == 0) next
  print(x)
}


## ---- echo=TRUE, eval=FALSE----------------------------------------------------------------------------------------------------------------------
## repeat {
##   print("helo")
##   Sys.sleep(.1)
## }
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"
## [1] "helo"


## ------------------------------------------------------------------------------------------------------------------------------------------------
c <- 0
repeat {
  print("helo")
  c <- c + 1
  if(c >= 5) break
}


## ---- eval=FALSE, echo= TRUE---------------------------------------------------------------------------------------------------------------------
## function_name <- function(arg1, arg2, arg3, ...) {
##   # a bunch of code which depends on arg1, arg2, arg3
##   return(final_object)
## }


## ------------------------------------------------------------------------------------------------------------------------------------------------
f <- function(x) {
  value <- sqrt(x^3)
  return(value)
}
f(x = 4)
f(4)
sqrt(4^3)


## ---- error=TRUE---------------------------------------------------------------------------------------------------------------------------------
f <- function(x,y) {
  value <- sqrt(y*x^3)
  return(value)
}
f(x = 4, y = 1)
f(x = 4)


## ------------------------------------------------------------------------------------------------------------------------------------------------
f <- function(x,y = 1) {
  value <- sqrt(y*x^3)
  return(value)
}
f(x = 4, y = 1)
f(x = 4)


## ------------------------------------------------------------------------------------------------------------------------------------------------
string_maker_4000 <- function(input_number) {
  if(input_number > 5) return("input_number was larger than 5")
  cat("hello\n")
  if(input_number < 5) return("input_number was less than 5")
  cat("there\n")
}
string_maker_4000(6)
string_maker_4000(4)
string_maker_4000(5)


## ------------------------------------------------------------------------------------------------------------------------------------------------
test <- function(x, fun) {
  if(x>2) {
    fun
    return(x)
  } else {
    return(x)
  }
}
test(x = 1, fun = Sys.sleep(3)) # executes instantly
test(x = 3, fun = Sys.sleep(3)) # sleeps for 3s because fun was needed.


## ---- echo=TRUE, eval=FALSE----------------------------------------------------------------------------------------------------------------------
## a_function <- function(a, b, c, ...) {
##   d <- a + b + c
##   r <- some_other_function(d, ...)
##   return(r)
## }


## ---- fig.height=5, fig.width=5------------------------------------------------------------------------------------------------------------------
square_and_plot <- function(X) {
  Y <- X^2
  plot(x = X, y = Y)
}

square_and_plot_2 <- function(X, ...) {
  Y <- X^2
  plot(x = X, y = Y, ...)
}


## ---- fig.height=3.5, fig.width=5----------------------------------------------------------------------------------------------------------------
square_and_plot(0:12)


## ---- fig.height=3.5, fig.width=5----------------------------------------------------------------------------------------------------------------
square_and_plot_2(0:12, main = "A plot")


## ------------------------------------------------------------------------------------------------------------------------------------------------
Fib <- function(fib_n) {
  F <- rep(NA, times = fib_n)
  F[1] <- 0
  F[2] <- 1
  for(n in 3:fib_n) {
    F[n] <- F[n-1] + F[n-2]
  }
  return(F)
}
Fib(8)


## ------------------------------------------------------------------------------------------------------------------------------------------------
coefficient_extractor <- function(y,x) {
  lin_mod <- lm(y ~ x)
  betas <- coef(lin_mod)
  return(betas)
}
data(cars)
coefficient_extractor(y = cars$dist, x = cars$speed)


## ------------------------------------------------------------------------------------------------------------------------------------------------
A <- rbind(c(1,2,3),c(4,6,8))
A


## ------------------------------------------------------------------------------------------------------------------------------------------------
SSD <- function(row) {
  sum(( row - mean(row) )^2)
}
SSD(A[1,])
SSD(A[2,])


## ------------------------------------------------------------------------------------------------------------------------------------------------
apply(A,
      MARGIN = 1,
      FUN = SSD)


## ------------------------------------------------------------------------------------------------------------------------------------------------
A
apply(A,
      MARGIN = 2,
      FUN = SSD)


## ------------------------------------------------------------------------------------------------------------------------------------------------
a_list <- list("here","are","some","words")
a_list


## ------------------------------------------------------------------------------------------------------------------------------------------------
lapply(a_list, toupper)


## ------------------------------------------------------------------------------------------------------------------------------------------------
sapply(a_list, toupper)


## ------------------------------------------------------------------------------------------------------------------------------------------------
vals <- 1:5
# Naming a function
my_function <- function(x) x^2
vals |> sapply(my_function)

# Old way to specify an anonymous function
vals |> sapply( function(x) x^2 )

# New shorthand for anonymous functions
vals |> sapply( \(x){x^2} )

